---
# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/apps.emqx.io/emqx_v2beta1.json
apiVersion: apps.emqx.io/v2beta1
kind: EMQX
metadata:
  name: emqx
  namespace: database
spec:
  image: public.ecr.aws/emqx/emqx:5.6.0
  imagePullPolicy: IfNotPresent
  coreTemplate:
    spec:
      replicas: 3
      # volumeClaimTemplates:
      #   storageClassName: openebs-hostpath
      #   resources:
      #     requests:
      #       storage: 100Mi
      #   accessModes: ["ReadWriteOnce"]
  replicantTemplate:
    spec:
      replicas: 3
  listenersServiceTemplate:
    metadata:
      annotations:
        io.cilium/lb-ipam-ips: 192.168.42.129
    spec:
      type: LoadBalancer
  dashboardServiceTemplate:
    metadata:
      annotations:
        io.cilium/lb-ipam-ips: 192.168.42.130
    spec:
      type: LoadBalancer
